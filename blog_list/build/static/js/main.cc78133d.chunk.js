(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(22),s=n.n(a),i=n(6),o=n.n(i),u=n(11),l=n(8),d=n(27),j=n.n(d),b="/api/blogs",h=null,O=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,j.a.delete("".concat(b,"/").concat(t),n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put("".concat(b,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x={getAll:function(){return j.a.get(b).then((function(e){return e.data}))},setToken:function(e){h="bearer ".concat(e)},create:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,j.a.post(b,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:p,deleteBlog:O},v=n(20),f=n(107),g=n(1),m=function(e){var t=e.blog,n=Object(r.useState)(!1),c=Object(l.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(t.likes),d=Object(l.a)(i,2),j=d[0],b=d[1],h=Object(r.useState)(!1),O=Object(l.a)(h,2),p=O[0],m=O[1],y=Object(v.c)((function(e){return e.signedUser})).username===t.user.username,w={paddingTop:4,paddingLeft:3,paddingBottom:4,border:"solid",borderWidth:2,marginBottom:5,marginTop:5},k=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))){e.next=4;break}return e.next=3,x.deleteBlog(t.id);case 3:m(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.update(t.id,{user:t.user.id,likes:j+1,author:t.author,title:t.title,url:t.url});case 2:b(j+1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p?Object(g.jsx)("div",{children:"deleted."}):a?Object(g.jsxs)("div",{style:w,className:"block-example border border-dark",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("strong",{children:"Title:"})," ",t.title,Object(g.jsx)(f.a,{variant:"info",onClick:function(){return s(!a)},children:a?"hide":"view"})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("strong",{children:"Link:"})," ",t.url]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("strong",{children:"Likes:"})," ",j," ",Object(g.jsx)(f.a,{variant:"dark",onClick:S,children:"like"})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("strong",{children:"Author name:"})," ",t.author]}),Object(g.jsx)("div",{children:!0===y&&Object(g.jsx)(f.a,{variant:"danger",onClick:k,children:"remove"})})]}):Object(g.jsx)("div",{style:w,className:"block-example border border-dark",children:Object(g.jsxs)("div",{children:[t.title," -",t.author,Object(g.jsx)(f.a,{variant:"info",onClick:function(){return s(!a)},children:a?"hide":"view"})]})})},y=n(108),w=function(){var e=Object(v.c)((function(e){return e.notification}));return""===Object(v.c)((function(e){return e}))?Object(g.jsx)("div",{}):Object(g.jsx)("div",{children:e.text&&Object(g.jsx)(y.a,{variant:e.reason,children:e.text})})},k=n(109),S=function(e){var t=e.user;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:t.name}),Object(g.jsx)("h4",{children:"added blogs"}),Object(g.jsx)("ul",{children:t.blogs.map((function(e){return Object(g.jsx)("li",{children:e.title},e.id)}))})]})},L=n(10),C=n(37),I=function(){var e=Object(v.c)((function(e){return e.users})),t=Object(L.f)("/users/:id"),n=t?e.find((function(e){return e.id===t.params.id})):void 0;return Object(g.jsxs)(L.c,{children:[Object(g.jsxs)(L.a,{path:"/users/:userId",children:[void 0===n&&Object(g.jsx)("div",{children:"there is no user with this id"}),void 0!==n&&Object(g.jsx)(S,{user:n})]}),Object(g.jsx)(L.a,{path:"/users",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"Users"}),Object(g.jsx)(k.a,{striped:!0,children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{}),Object(g.jsx)("td",{children:Object(g.jsx)("strong",{children:"blogs created"})})]}),e.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)(C.b,{to:"/users/".concat(e.id),children:e.username})}),Object(g.jsxs)("td",{children:[" ",e.blogs.length]})]},e.username)}))]})})]})})]})},T={login:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=n(113),B=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(""),i=Object(l.a)(s,2),d=i[0],j=i[1],b=Object(r.useState)(""),h=Object(l.a)(b,2),O=h[0],p=h[1],x=function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.addBlog({title:c,author:d,url:O});case 3:a(""),j(""),p("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Create New"}),Object(g.jsx)(N.a,{onSubmit:x,children:Object(g.jsxs)(N.a.Group,{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(N.a.Label,{children:"title:"}),Object(g.jsx)(N.a.Control,{type:"text",value:c,name:"title",onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(N.a.Label,{children:"author:"}),Object(g.jsx)(N.a.Control,{type:"text",value:d,name:"author",onChange:function(e){var t=e.target;return j(t.value)}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(N.a.Label,{children:"url:"}),Object(g.jsx)(N.a.Control,{type:"text",value:O,name:"url",onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(g.jsx)(f.a,{variant:"primary",type:"submit",children:"create "})]})})]})},U=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),c=Object(l.a)(n,2),a=c[0],s=c[1],i={display:a?"none":""},o={display:a?"":"none"},u=function(){s(!a)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:u}})),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:i,children:Object(g.jsx)(f.a,{varinat:"primary",onClick:u,children:e.buttonLabel})}),Object(g.jsxs)("div",{style:o,children:[e.children,Object(g.jsx)(f.a,{variant:"secondary",onClick:u,children:"cancel"})]})]})}));U.displayName="Togglable";var E=U,G=n(110),_=n(112),A=n(111),D=n(114),H=function(e){return{type:"SHOW",data:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SHOW"===t.type?t.data:"HIDE"===t.type?"":e},W=n(51),J=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.create(e);case 3:r=t.sent,n({type:"NEW_BLOG",data:r}),n(H({text:"a new blog ".concat(r.title," by ").concat(r.author," added"),reason:"success"})),setTimeout((function(){n({type:"HIDE"})}),5e3),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(H({text:"".concat(t.t0.response.data.error),reason:"danger"})),setTimeout((function(){n({type:"HIDE"})}),5e3);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"INIT_BLOGS"===t.type?t.data:"NEW_BLOG"===t.type?[].concat(Object(W.a)(e),[t.data]):e},V=function(e){return{type:"LOG_IN",data:e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"LOG_IN"===t.type?t.data:"LOG_OUT"===t.type?null:e},P={getUsers:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/users");case 2:return t=e.sent,console.log(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"INIT_USERS"===t.type?t.data:e},F=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.blogs})),n=Object(v.c)((function(e){return e.signedUser})),c=Object(r.useState)(""),a=Object(l.a)(c,2),s=a[0],i=a[1],d=Object(r.useState)(""),j=Object(l.a)(d,2),b=j[0],h=j[1],O=Object(r.useRef)();Object(r.useEffect)((function(){e(function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getUsers();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogAppUser");if(t){var n=JSON.parse(t);x.setToken(n.token),e(V(n))}}),[]);var p={color:"white",padding:5},y=function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,T.login({username:s,password:b});case 4:r=t.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(r)),x.setToken(r.token),e(V(r)),i(""),h(""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),e(H({text:"wrong username or password",reason:"danger"})),setTimeout((function(){e({type:"HIDE"})}),5e3);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),k=function(){window.localStorage.clear(),e({type:"LOG_OUT"})},S=function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(J(n)),O.current.toggleVisibility();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)(C.a,{children:[Object(g.jsx)("div",{children:Object(g.jsx)(_.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"light",children:Object(g.jsxs)(A.a,{children:[Object(g.jsx)(_.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(g.jsx)(_.a.Collapse,{id:"responsive-navbar-nav",children:Object(g.jsxs)(D.a,{className:"mr-auto",children:[Object(g.jsx)(D.a.Link,{href:"#",as:"span",children:Object(g.jsx)(C.b,{style:p,to:"/",children:"home"})}),Object(g.jsx)(D.a.Link,{href:"#",as:"span",children:Object(g.jsx)(C.b,{style:p,to:"/users",children:"users"})})]})})]})})}),Object(g.jsxs)(A.a,{className:"py-3",children:[Object(g.jsx)("h2",{children:"blogs"}),null!==n&&Object(g.jsxs)("div",{style:{paddingBottom:10},children:[Object(g.jsxs)("div",{children:[n.name," logged in "]}),Object(g.jsxs)("div",{children:[Object(g.jsxs)(f.a,{variant:"danger",onClick:k,children:[" ","log out"," "]})," "]})]}),Object(g.jsx)(w,{}),null===n&&Object(g.jsxs)("div",{children:[Object(g.jsx)(N.a,{onSubmit:y,children:Object(g.jsxs)(N.a.Group,{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(N.a.Label,{children:"username:"}),Object(g.jsx)(N.a.Control,{type:"text",name:"username",value:s,onChange:function(e){var t=e.target;return i(t.value)}})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(N.a.Label,{children:"password:"}),Object(g.jsx)(N.a.Control,{type:"password",name:"Password",value:b,onChange:function(e){var t=e.target;return h(t.value)}})]}),Object(g.jsx)(f.a,{variant:"primary",type:"submit",children:"login"})]})}),Object(g.jsx)(G.a,{children:Object(g.jsx)("div",{children:"you can use either of these accounts to login"})}),Object(g.jsxs)(G.a,{children:[Object(g.jsx)("div",{children:"username: malek"}),Object(g.jsx)("div",{children:"password: malek123"})]}),Object(g.jsx)("br",{}),Object(g.jsxs)(G.a,{children:[Object(g.jsx)("div",{children:"username: abdallah"}),Object(g.jsx)("div",{children:"password: aabdou123"})]})]}),Object(g.jsxs)(L.c,{children:[Object(g.jsx)(L.a,{path:"/users",children:null!==n&&Object(g.jsx)(I,{})}),Object(g.jsx)(L.a,{path:"/",children:null!==n&&Object(g.jsxs)("div",{style:{paddingTop:10},children:[Object(g.jsx)(E,{buttonLabel:"create blog",ref:O,children:Object(g.jsx)(B,{addBlog:S})}),t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(g.jsx)(m,{blog:e},e.id)}))]})})]})]})]})},K=(n(103),n(42)),Q=n(71),X=n(70),Y=(n(104),Object(K.combineReducers)({notification:R,blogs:z,signedUser:M,users:q})),Z=Object(K.createStore)(Y,Object(X.composeWithDevTools)(Object(K.applyMiddleware)(Q.a)));s.a.render(Object(g.jsx)(v.a,{store:Z,children:Object(g.jsx)(F,{})}),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.cc78133d.chunk.js.map